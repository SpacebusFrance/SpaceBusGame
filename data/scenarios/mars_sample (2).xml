<?xml version="1.0" encoding="UTF-8"?>
<scenario>
    <group name="debut de jeux">
        <!-- set the screen "lost_astronaut" (never-mind the name) -->
        <step action="set_screen" name="lost_astronaut"/>
<!--        <step action="keyboard" key="control-enter"/>-->
        <step action="game_menu"/>

        <step action="wait" duration="2"/>
        <!-- starts the background music -->
        <step action="play_music" name="music"/>

        <!-- lock password -->
        <step action="password" password="RTJ108" title="$la_lock_tile$" text="$la_lock_text$" icon="locked" hint_sound="voice_password_cmd_hint" hint_time="300"/>

        <!-- <step action="play_sound" name="ok" duration="0"/> -->
        <step action="wait" duration="2"/>
        <step action="play_sound" name="voice_bio_intro" duration="0"/>
        <step action="info" title="$la_game_info_title$" text="$la_text$" duration="80" icon="compose" close_on_enter="False" text_size="0.042"/>

        <!-- setup timer and events (fixed time) -->
        <event action="goto_step" goto_id="end" delay="890"/>
        <event action="play_sound" name="voice_bio_10min" delay="300" duration="0"/>
        <event action="play_sound" name="voice_bio_5min" delay="600" duration="0"/>
        <event action="play_sound" name="voice_bio_1min" delay="840" duration="0"/>
        <event action="play_sound" name="voice_bio_end" delay="885" duration="0"/>
        <event action="start_chrono" time="900"/>

        <step action="wait" duration="2"/>

        <step action="enable_hardware"/>
<!--        &lt;!&ndash; game unlock condition &ndash;&gt;-->
<!--        <step action="wait">-->
        <step action="info" title="$la_game_info_title$" text="$la_instructions$" icon="compose" close_on_enter="False">
            <condition key="pilote_automatique1" value="True"/>
            <condition key="pilote_automatique2" value="True"/>
            <condition key="correction_roulis" value="True"/>
            <condition key="correction_stabilisation" value="True"/>
            <condition key="correction_direction" value="True"/>
        </step>
        <step action="disable_hardware"/>
        <step action="wait" duration="2"/>

        <step action="info" title="$la_game_info_title$" text="$la_game_info_text$" duration="30" icon="gamecontroller"/>
        <!-- start game -->
        <step action="2d_game_start" goal="30"/>

        <!-- display code -->
        <step action="enable_hardware"/>
        <step action="info" title="$la_unlocked_title$" text="$la_unlocked_info$" close_on_enter="False" text_size="0.06">
            <condition key="recyclage_CO2" value="False"/>
            <condition key="recyclage_O2" value="False"/>
        </step>
        <step action="disable_hardware"/>

        <!-- display score file -->
        <step action="play_sound" name="voice_end_mars_sample" duration="0"/>
        <step action="end_game" duration="60"/>
        <!-- this happens if we bypass previous step  -->
        <step action="restart"/>
    </group>
    <group id="end">
        <step action="play_sound" name="alarm" duration="0"/>
        <step action="led_on" led="alert0" loop="True"/>
        <step action="led_on" led="alert1" loop="True"/>
        <step action="info" title="$la_chrono_end_title$" text="$la_chrono_end_text$" duration="60" icon="caution" text_size="0.06" close_on_enter="False"/>

        <!-- wait for end -->
        <step action="restart"/>
    </group>
</scenario>
